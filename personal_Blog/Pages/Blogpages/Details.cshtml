@page
@model personal_Blog.Pages.Blogpages.DetailsModel
@using System.Text.Json

@{
    ViewData["Title"] = "Details";
}

<div class="container mt-4">
    <div class="card show-sm">
        <div class="card-header bg-primary text-white">
            <h2>@Html.DisplayNameFor(model => model.Publication.Title)</h2>
        </div>
        <div class="card-body">
            <!-- Main image -->
            @if (!string.IsNullOrEmpty(Model.Publication.ProfileImagePath))
            {
                var images = Model.Publication.ProfileImagePath.Split(',');
                <div class="mb-3">
                    <img src="@images.First()" alt="Image principale" class="img-fluid rounded" width="150" />
                </div>
                <br />
                <!-- Other images -->
                var otherimages = JsonSerializer.Deserialize<List<string>>(Model.Publication.ImagePaths);
                @if (otherimages != null && otherimages.Any())
                {
                    <div class="d-flex flex-wrap gap-2">
                        @foreach (var img in otherimages)
                        {
                            <img src="@img" alt="Image supplémentaire" class="img-thumbnail" style="width:150px; height:150px;" />
                        }
                    </div>
                }
            }

            <p class="mt-3"><strong>Description :</strong></p>
            <p>@Html.Raw(Model.Publication.Description)</p>
            <p><strong>@Html.DisplayNameFor(model => model.Publication.TypeHouse) :</strong> @Model.Publication.TypeHouse</p>
            <p><small class="text-muted">Publié le @Model.Publication.CreatedAt.ToString("dd/MM/yyyy")</small></p>
        </div>
        <div class="card-footer text-end">
            <a asp-page="./Edit" asp-route-id="@Model.Publication.Id" class="btn btn-warning">Modifier</a>
            <a asp-page="./Index" class="btn btn-secondary">Retour</a>
        </div>
    </div>
</div>

<!--<h1>Details</h1>

<div>
    <h4>Publication</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.Title)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.Title)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.Description)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.Description)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.ImagePaths)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.ImagePaths)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.TypeHouse)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.TypeHouse)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.CreatedAt)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.CreatedAt)
        </dd>
    </dl>
</div>

@if (!string.IsNullOrEmpty(Model.Publication.ProfileImagePath))
{
    <div class="mt-3">
        <strong>Image de profil :</strong><br />
        <img src="@Model.Publication.ProfileImagePath" alt="Image de profil" width="200" />
    </div>
}

@if (!string.IsNullOrEmpty(Model.Publication.ImagePaths))
{
    var images = JsonSerializer.Deserialize<List<string>>(Model.Publication.ImagePaths);
    if (images != null && images.Any())
    {
        <div class="mt-3">
            <strong>Images supplémentaires :</strong><br />
            @foreach (var path in images)
            {
                <img src="@path" alt="Image" width="200" class="me-2 mb-2" />
            }
        </div>
    }
}

<div>
    <a asp-page="./Edit" asp-route-id="@Model.Publication.Id">Edit</a> |
    <a asp-page="./Index">Back to List</a>
</div>
-->
