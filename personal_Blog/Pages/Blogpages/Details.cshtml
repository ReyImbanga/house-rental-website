@page
@model personal_Blog.Pages.Blogpages.DetailsModel
@using System.Text.Json

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>Publication</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.Title)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.Title)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.Description)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.Description)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.ImagePaths)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.ImagePaths)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.TypeHouse)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.TypeHouse)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Publication.CreatedAt)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Publication.CreatedAt)
        </dd>
    </dl>
</div>

@if (!string.IsNullOrEmpty(Model.Publication.ProfileImagePath))
{
    <div class="mt-3">
        <strong>Image de profil :</strong><br />
        <img src="@Model.Publication.ProfileImagePath" alt="Image de profil" width="200" />
    </div>
}

@if (!string.IsNullOrEmpty(Model.Publication.ImagePaths))
{
    var images = JsonSerializer.Deserialize<List<string>>(Model.Publication.ImagePaths);
    if (images != null && images.Any())
    {
        <div class="mt-3">
            <strong>Images supplémentaires :</strong><br />
            @foreach (var path in images)
            {
                <img src="@path" alt="Image" width="200" class="me-2 mb-2" />
            }
        </div>
    }
}

<div>
    <a asp-page="./Edit" asp-route-id="@Model.Publication.Id">Edit</a> |
    <a asp-page="./Index">Back to List</a>
</div>
